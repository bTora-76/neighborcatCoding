#include <iostream>
using namespace std;

struct Node{
    int id;
    Node *next;
    Node(int num){
        id = num;
        next = NULL;
    }
};

// insert 1 1 0 >> 1 = insert, 1 is the inserted id, 0 the id before insertion

void show(Node *ptr){
    while (ptr != NULL){
        // dont print 0
        if (ptr->id != 0){
            cout << ptr->id << " ";
        }
        ptr = ptr->next;
    }
}


void insert(Node *ptr, int newId, int Bid){
    Node *head = ptr; // just in case: we can restart from beginning

    // if the current id isn't the one we're looking for
    while (ptr->id != Bid && ptr->next != NULL)
    {   
        if(ptr->id == newId) return; // cant add replicas 
        ptr = ptr->next;
    }
    if(ptr->id == newId) return; // check last node

    // insert front
    if (ptr->next == NULL && ptr->id != Bid){
        
        Node *temp = head->next;
        head->next = new Node(newId);
        head->next->next = temp;

        return;
    };

    // if at correct node

    Node *temp = ptr->next;
    ptr->next = new Node(newId);
    ptr->next->next = temp;
} 



void del(Node *ptr, int Delid){

    Node *ptr1 = ptr;
    Node *ptr2 = ptr->next;

    // don't delete if only 1 node left
    if(ptr->next->next == NULL) return;

    while (ptr2->id != Delid && ptr2->next != NULL){
        ptr1 = ptr1->next;
        ptr2 = ptr2->next;
    }

    // can't find any
    if (ptr2->next == NULL && ptr2->id != Delid){
        return;
    }   

    Node *temp = ptr2;
    ptr2 = ptr2->next;

    ptr1->next = ptr2;
    delete(temp);







}



int main(){

    Node *head;

    head = new Node(0);

    // insert(head, 1, 0);
    // show(head);

    while (true){
        int mode;
        cin >> mode;
        if (mode == 3) break;
        if (mode == 1){
            int newID, Bid;
            cin >> newID >> Bid;
            insert(head, newID, Bid);
        } 

        if(mode == 0){
            int delId;
            cin >> delId;
            del(head, delId);
        }

        show(head);
    }

    return 0;
}
